Для чтения структуры бинарного файла на языке Си необходимо использовать функции из стандартной библиотеки ввода-вывода (stdio.h). Основные шаги включают:

Открытие файла в бинарном режиме.
Чтение данных из файла в структуру.
Закрытие файла.
Пример кода для чтения структуры из бинарного файла:


#include <stdio.h>
#include <stdlib.h>

// Пример структуры
struct MyData {
    int id;
    char name[20];
    double value;
};

int main() {
    FILE *file;
    struct MyData data;

    // Открытие файла в бинарном режиме для чтения
    file = fopen("data.bin", "rb");
    if (file == NULL) {
        perror("Ошибка при открытии файла");
        return 1;
    }

    // Чтение данных из файла в структуру
    if (fread(&data, sizeof(struct MyData), 1, file) != 1) {
        perror("Ошибка при чтении данных из файла");
        fclose(file);
        return 1;
    }

    // Вывод прочитанных данных
    printf("ID: %d\n", data.id);
    printf("Имя: %s\n", data.name);
    printf("Значение: %f\n", data.value);

    // Закрытие файла
    fclose(file);

    return 0;
}
Пояснение:
Открытие файла: Функция fopen("data.bin", "rb") открывает файл data.bin в бинарном режиме для чтения ("rb").
Чтение данных: Функция fread(&data, sizeof(struct MyData), 1, file) читает данные из файла в структуру data. Первый аргумент — это указатель на структуру, второй — размер структуры, третий — количество элементов для чтения (в данном случае 1), и последний — файловый указатель.
Вывод данных: После успешного чтения данных из файла, они выводятся на экран с помощью функции printf.
Закрытие файла: После завершения работы с файлом, его необходимо закрыть с помощью функции fclose(file).
Этот пример демонстрирует основные шаги для чтения структуры из бинарного файла.
